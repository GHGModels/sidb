---
title: "Summary of entries in the Soil Incubation Database"
author: "Carlos A. Sierra and Heidi VÃ¶lkel"
date: '`r format(Sys.time(), "%d %B, %Y")`'
output: pdf_document
---

```{r, echo=FALSE}
#entryNames=list.dirs("~/sidb/data/", full.names=FALSE, recursive=FALSE)
source("~/sidb/scripts/readYaml.R")
source("~/sidb/scripts/loadEntries.R")

# Some statistics
dataPoints=NULL
nCols=NULL
for(i in 1:length(entryNames)){
  mtx=get(entryNames[i])$data
  nCols[i]=dim(mtx)[2]-1
  dataPoints[i]=length(as.matrix(mtx))
  rm(mtx)
}
```

This file contains a summary of the data currently available in the soil incubation database **sidb**. Currently, the number of entries in the database is `r length(entryNames)`. Most entries have multiple time-series of CO<sub>2</sub> flux release from incubation experiments. The current total number of time-series  is `r sum(nCols)`, and the total number of datapoints is `r sum(dataPoints)`.
The last entry was added on `r max(entryCreationDate)`.


```{r, echo=FALSE}
entryBaseMetadata=data.frame(citationKey, doi, entryAuthor, entryCreationDate)

library(knitr)
kable(entryBaseMetadata)
```

Locations for which data are available are presented in the following map

```{r, echo=FALSE, warning=FALSE, message=FALSE}
library(maps)
map('world', interior = FALSE)
points(longitude, latitude, pch=20, col=2)
```

## Datasets
The file `~/scripts/plotEntry.R` can be used to plot individual entries from the database. For example

```{r}
source("~/sidb/scripts/plotEntry.R")
plotEntry(entry=Andrews2000SBB)
```

The plots produced by this function are at the moment not of high quality, so use the function only to visually assess the data. For exmaple,

```{r}
plotEntry(entry=Arevalo2012)
```

produces output that is not ideal for publication. You're welcome to modify the function `plotEntry` for output of better quality.

